{% extends "base.html" %}
{% block head %}
{{ super() }} {% endblock %}

{% block content %}
<div class="row justify-content-center no-gutters pt-2 pb-5">


    <form method="get" enctype="multipart/form-data" action="/EnvDataAPI/request_env_data" id="submitForm">

        <div class="col-12">
            <div class="row">

                <div class="col-6">
                    <!--
                        TIMESTAMP
                    -->
                    <div id="boundingBoxPanel">

                    <fieldset class="row m-1" data-toggle="tooltip" data-placement="bottom"
                              title="Maximal temporal bounding box size is {{ max_days }} days. Start must be before end.">
                        <legend>Temporal Bounding Box</legend>
                        <div class="col-form-label text-right">&nbsp;</div>
                        <input id="date_lo" class="form-control col-5" type="datetime-local" name="date_lo"
                               value="2019-06-02T03:44">
                        <div class="col-1 text-center mdash">&nbsp;&rarr;&nbsp</div>
                        <input id="date_hi" class="form-control col-5" type="datetime-local" name="date_hi"
                               value="2019-06-03T09:55">
                    </fieldset>
                    <!--
                        Spatial Bounding Box
                    -->
                    <fieldset class="m-2">
                        <legend>Spatial Bounding Box</legend>
                        <fieldset class="row m-1" data-toggle="tooltip" data-placement="bottom"
                                  title="Maximal latitude extent is {{ max_lat }}°; start must be lower than end. Supported values are between [-90, 90]">
                            <div class="col-form-label col-2 text-right">Latitude</div>
                            <input id="lat_lo" class="form-control col-4 bbox" type="number" name="lat_lo" value="53.08"
                                   step="any">
                            <div class="col-1 text-center mdash">&nbsp;&rarr;&nbsp</div>
                            <input id="lat_hi" class="form-control col-4 bbox" type="number" name="lat_hi" value="55.08"
                                   step="any">
                        </fieldset>
                        <fieldset class="row m-1" data-toggle="tooltip" data-placement="bottom"
                                  title="Maximal longitude extent is {{ max_lon }}°; start must be lower than end. Supported values are between [-180, 180]">
                            <div class="col-form-label col-2 text-right">Longitude</div>
                            <input id="lon_lo" class="form-control col-4 bbox" type="number" name="lon_lo" value="1.69"
                                   step="any">
                            <div class="col-1 text-center mdash">&nbsp;&rarr;&nbsp</div>
                            <input id="lon_hi" class="form-control col-4 bbox" type="number" name="lon_hi" value="6.1"
                                   step="any">
                        </fieldset>
                  </fieldset>

                    </div>
                    <!--
                         Upload csv file
                        -->
                    <fieldset class="m-3">
                        <legend>Upload a csv file</legend>
                        <div class="row m-1">
                            <input type="file" id="csvUpload" name="csvUpload" class="col-auto m-2">
                            <a id="removeFileBtn" class="btn uploadFileTools col-auto" style="display: none">x</a>
                        </div>
                        <div class="uploadFileTools"  style="display: none">
                            <div class="row m-1" data-toggle="tooltip" data-placement="bottom"
                                  title="Must be in format %Y-%m-%d %H:%M:%S">
                                <div class="col-form-label col-2 text-right">Timestamp</div>
                                <select id="timestamp_select" class="form-control col-3 select_header"></select>
                                    </div>
                            <div class="row m-1" data-toggle="tooltip" data-placement="bottom"
                                  title="Must be in range of [-90, 90]">
                                <div class="col-form-label col-2 text-right">Latitude</div>
                                <select  id="lat_select" class="form-control col-3 select_header"></select>
                                    </div>
                            <div class="row m-1" data-toggle="tooltip" data-placement="bottom"
                                  title="Must be in range of [-180, 180]">
                                <div class="col-form-label col-2 text-right">Longitude</div>
                                <select id="lon_select" class="form-control col-3 select_header"></select>
                            </div>
                         </div>
                    </fieldset>
                </div>
                <div class="col-6 w-100">
                    <div id="mapid"></div>
                </div>
            </div>
        </div>

        <!--
             Enviromental Parameters
            -->
        <fieldset class="m-3">
            <legend>Enviromental Parameters</legend>
            <div id="checkbox_list" class="row no-gutters m-3"></div>
        </fieldset>
        <!--
            Format Parameters
        -->
        <fieldset class="row m-3">
            <legend>File Format</legend>
            <div class="col-10">
                <div class="form-check">
                    <input class="form-check-input" type="radio" id="format_csv" name="format" value="csv"
                           checked="checked">
                    <label class="form-check-label" for="format_csv">CSV</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" id="format_netcdf" value="netcdf" name="format">
                    <label class="form-check-label" for="format_netcdf">netCDF</label>
                </div>
            </div>
        </fieldset>
        <!--
            Information
        -->
        <div class="row m-3">
            <legend>Please consider the following:</legend>
            <ul>
                <li>Missing variables or missing data sets are going to be skipped.</li>
                <li>Requests are limited to max 1 request per 10 seconds and 70 requests per hour.</li>
                <li>Maximal bbox dimension ({{ max_lat }}° lat x {{ max_lon }}° lon x {{ max_days }} days).</li>
                <li>All data is interpolated to match the following constraints:
                    <ul>
                        <li>Spatial Resolution: 0.083° &times; 0.083°</li>
                        <li>Temporal Resolution: 3-hours interval</li>
                        <li>
                            <a href="https://docs.google.com/spreadsheets/d/1GxcBtnaAa2GQDwZibYFbWPXGi7BPpPdYLZwyetpsJOQ/edit#gid=0"
                               target="_blank">
                                Detailed descriptions of the original datasets
                            </a>
                        </li>
                    </ul>
                </li>
            </ul>
        </div>
        <!--
            Submit
        -->
        <button class="btn btn-primary m-3" type="submit" id="submitBtn">Retrieve Data</button>
    </form>
</div>
{% endblock %}
